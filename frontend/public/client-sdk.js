(function(){var e=Object.defineProperty,t=(e,t)=>()=>(e&&(t=e(e=0)),t),n=(t,n)=>{let r={};for(var i in t)e(r,i,{get:t[i],enumerable:!0});return n&&e(r,Symbol.toStringTag,{value:`Module`}),r};Promise.withResolvers===void 0&&(Promise.withResolvers=()=>{let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}});function r(){}var i,a=t((()=>{i=r})),o=t((()=>{a()})),s=n({default:()=>d}),c,l,u,d,f=t((()=>{o(),{ipcRenderer:c}=window.electron,l={width:1280,height:750,maximized:!1,center:!0},u=class{constructor(){this.platform=`electron`,this.windows=new Map,this.setWindowSize=async e=>{let t=e?.width??screen.availWidth-40,n=e?.height??screen.availHeight-40;c.send(`window-set-size`,t,n)}}async createWindow(e,t){let{label:n}=e;e.title=n;let r=await c.invoke(`ipcCreateWindow`,e);return c.on(`window-close`,(e,n)=>{console.log(`window-close id: `,n),n===r&&t&&t()}),r}async emitTo(e){return c.invoke(`w2w`,e)}async showWindow(){c.send(`window-show`)}async hideWindow(){c.send(`window-hide`)}maximizeWindow(e=!1){return new Promise(t=>{c.invoke(`window-is-maximized`).then(n=>{n&&!e?c.invoke(`window-unmaximize`).then(()=>{this.centerWindow(),t(!1)}):c.invoke(`window-maximize`).then(()=>{t(!0)})}).catch(e=>{console.error(`Error checking window maximized state:`,e),t(!1)})})}async minimizeWindow(){return await c.invoke(`window-minimize`)}async restoreWindow(){return await c.invoke(`window-restore`)}closeWindow(e){c.send(`window-close`,{label:e})}getScaleFactor(){return Promise.resolve(window.devicePixelRatio||1)}scaleFactor(){return Promise.resolve(window.devicePixelRatio||1)}async setWindowAlwaysOnTop(e=!0){c.send(`window-set-always-on-top`,e)}isMaximized(){return new Promise(e=>{c.invoke(`window-is-maximized`).then(t=>{e(t)}).catch(t=>{console.error(`Error checking window maximized state:`,t),e(!1)})})}isMinimized(){return new Promise(e=>{c.invoke(`window-is-minimized`).then(t=>{e(t)}).catch(t=>{console.error(`Error checking window minimized state:`,t),e(!1)})})}foucsWindow(){c.invoke(`window-focus`).then(e=>{e||setTimeout(async()=>{await c.invoke(`window-focus`)},300)}).catch(e=>{console.error(`Error focusing the window:`,e)})}restoreLoginWindow(){c.send(`window-set-size`,l.width,l.height),this.centerWindow()}centerWindow(){c.send(`window-center`)}getScreenWorkArea(){return new Promise((e,t)=>{c.invoke(`get-workarea`).then(t=>{e(t)}).catch(e=>{console.error(`Error getting screen work area:`,e),t(e)})})}async setWindowPosition(e=0,t=0){let n=devicePixelRatio;c.send(`window-set-position`,Math.floor(e/n),Math.floor(t/n))}async setLogicalWindowPosition(e=0,t=0){c.send(`window-set-position`,e,t)}showDecorations(){console.log(`showDecorations`),c.send(`window-set-menubar`,!0)}hideDecorations(){c.send(`window-set-menubar`,!1)}minLogWindow(e){let t=Math.floor(window.screen.availWidth),n=Math.floor(window.screen.availHeight);e?(this.setWindowSize({width:32,height:128}),this.setLogicalWindowPosition(t-32-2,n-128-2)):(this.setWindowSize({width:360,height:128}),this.setLogicalWindowPosition(t-360-2,n-128-2))}async onWindowResize(e){return window.addEventListener(`resize`,e),i}async onWindowClose(e){c.on(`window-close-confirm`,(t,n)=>{e&&e()})}},d=u})),p=n({default:()=>h}),m,h,g=t((()=>{m=class{constructor(){this.baseShortCut=[`CommandOrControl+F`],this.toolbarShortCut=[`Shift+F5`,`F5`,`F10`,`F9`,`F8`,`Shift+F10`],this.globalShortcut=window.electron.globalShortcut}register(e,t){this.globalShortcut.register(e,t)}unregister(e){this.globalShortcut.unregister(e)}unregisterAll(){this.globalShortcut.unregisterAll()}regeisterToolbar(){this.unregisterAll(),this.toolbarShortCut.forEach(e=>this.register(e,e=>{console.log(`toolbarShortCut: ${e}`)}))}regeisterFlow(){}},h=m})),_=n({default:()=>S});function v(){return new Promise(e=>{e(b.readText())})}function y(e){return new Promise(t=>{b.writeText(e),t()})}var b,x,S,C=t((()=>{({clipboard:b}=window.electron),x={readClipboardText:v,writeClipboardText:y},S=x})),w=n({default:()=>W});function T(){return`electron`}function E(e){L.send(`open-in-browser`,e)}function D(e,t){L.on(e,(e,n)=>t(n))}function O(){return new Promise(e=>{let t=localStorage.getItem(`electron`);if(t){let{appVersion:n}=JSON.parse(t);e(n)}else e(`latest`)})}function k(){return new Promise(e=>{let t=localStorage.getItem(`electron`);if(t){let{appPath:n}=JSON.parse(t);e(n)}else e(``)})}function A(){return new Promise(e=>{let t=localStorage.getItem(`electron`);if(t){let{userDataPath:n}=JSON.parse(t);e(n)}else e(``)})}function j(){return new Promise(e=>{let t=localStorage.getItem(`electron`);if(t){let{electronVersion:n}=JSON.parse(t);e(`Build by Electron ${n}`)}else e(``)})}function M(){return new Promise(e=>{let t=localStorage.getItem(`electron`);if(t){let{arch:n,platform:r,release:i}=JSON.parse(t);e(`${i} ${r} ${n} `)}else e(``)})}function ee(e,...t){return new Promise((n,r)=>{L.invoke(e,...t).then(e=>{n(e)}).catch(e=>r(e))})}function N(e){L.invoke(`open-path`,e).then(e=>{e?console.log(`Video played successfully`):console.error(`Failed to play video`)})}function P(e){return new Promise(t=>{L.invoke(`path-join`,...e).then(e=>{t(e)})})}function F(e){return new Promise((t,n)=>{let r=e.replace(/\\/g,`/`);console.log(`fullPath: `,r),S.writeClipboardText(r),L.invoke(`open-path`,r).then(e=>{e?(console.log(`Shell opened successfully`),t()):(console.error(`Failed to open shell`),n(Error(`Failed to open shell`)))}).catch(e=>{console.error(`Error opening shell:`,e),n(e)})})}async function I(){let e=await k(),t=await A();t.endsWith(`/`)||(t+=`/`),e.startsWith(`C:`)||e.startsWith(`c:`)||e.startsWith(`/`)?F(`${t}python_core/Lib/site-packages/rpa_browser_plugin/plugins`):F(`${e}data/python_core/Lib/site-packages/rpa_browser_plugin/plugins`)}var L,R,z,B,V,H,U,W,G=t((()=>{C(),{ipcRenderer:L}=window.electron,R=(e,t)=>L.invoke(`read-file`,`${t}/${e}`),z=(e,t)=>L.invoke(`save-file`,e,t),B=e=>{let{file_type:t,filters:n,multiple:r,defaultPath:i=``}=e,a=!1,o=!1,s={title:`选择文件目录`,defaultPath:i};return t===`folder`&&(a=!0),t===`files`&&(o=!0),t===`file`&&(o=r),n&&n.length>0&&(s.filters=[{name:``,extensions:n.map(e=>e.replace(`.`,``))}]),new Promise(e=>{let t=[],n=a?`openDirectory`:`openFile`;t.push(n),o&&t.push(`multiSelections`),s.properties=t,L.invoke(`open-dialog`,s).then(t=>{e(t||null)})})},V=async e=>(console.log(`getPluginPath`),``),H=async()=>(console.log(`getPluginList`),[]),U={getAppEnv:T,getAppPath:k,getAppVersion:O,getBuildInfo:j,getSystemEnv:M,getUserPath:A,listenEvent:D,readFile:R,saveFile:z,invoke:ee,openInBrowser:E,openPlugins:I,pathJoin:P,playVideo:N,shellopen:F,showDialog:B,getPluginPath:V,getPluginList:H},W=U})),K=n({default:()=>Z});async function q(){return await Y.invoke(`check-for-updates`)}async function J(){Y.send(`quit-and-install-updates`)}var Y,X,Z,Q=t((()=>{({ipcRenderer:Y}=window.electron),X={checkUpdate:q,quitAndInstall:J},Z=X}));if(typeof window>`u`)throw TypeError(`This code must be run in a browser environment.`);let te=100;function $(){window.electron?(Promise.resolve().then(()=>(f(),s)).then(e=>{let t=e.default;window.WindowManager=new t}),Promise.resolve().then(()=>(g(),p)).then(e=>{let t=e.default;window.ShortCutManager=new t}),Promise.resolve().then(()=>(C(),_)).then(e=>{let t=e.default;window.ClipboardManager=t}),Promise.resolve().then(()=>(G(),w)).then(e=>{let t=e.default;window.UtilsManager=t}),Promise.resolve().then(()=>(Q(),K)).then(e=>{let t=e.default;window.UpdaterManager=t}),console.log(`%c Electron SDK initialization is complete`,`color: white; background-color: green;`)):setTimeout(()=>{te-- >0?$():console.warn(`Tauri SDK initialization failed: __TAURI_METADATA__ not found`)},0)}$()})();
//# sourceMappingURL=client-sdk.js.map